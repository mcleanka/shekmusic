/**
 main js file
 */
var tn_to_top,
	tn_smooth_display, 
	tn_smooth_scroll_data, 
	tn_sticky_navigation, 
	tn_sidebar_sticky_enable,
	tn_ticker_title, 
	tn_slider_data, 
	tn_big_slider_data,
	tn_rtl,
	tn_close_mobile_menu_text,
	tn_single_image_popup,
	touch = Modernizr.touch,
	tn_sb_instagram_popup;

"use strict";

var tn_sticky_sidebar={
		blocks:[],
		last_height:0,
		is_enable:!1,
		sticky_sidebar:function(t){
			1 == tn_sidebar_sticky_enable && (tn_sticky_sidebar.is_enable = !0),
			jQuery(window).width() < 769 && (tn_sticky_sidebar.is_enable = !1),
			tn_sticky_sidebar.add_block(t)},
		add_block:function(t){var o=tn_sticky_sidebar.create_block(t);"undefined"!=typeof o&&(tn_sticky_sidebar.add_clearfix(o),o.content_top=0,o.content_bottom=0,o.menu_offset=1==tn_sticky_navigation?jQuery("#menu-main").height()+"px":0,o.sidebar_top=0,o.status="top_content",o.sidebar_bottom=0,tn_sticky_sidebar.blocks.push(o))},
		create_block:function(t){var o={};return o.sidebar=t,o.content=t.parents(".tn-section-content-wrap").find(".tn-content-wrap"),0==o.content.length?console.log("No found content of sidebar"):o},
		add_clearfix:function(t){t.sidebar.prepend('<div class="clearfix"></div>').append('<div class="clearfix"></div>'),t.content.prepend('<div class="clearfix"></div>').append('<div class="clearfix"></div>')},
		block_postion:function(t){
			return t.content_top=t.content.offset().top,t.content_height=t.content.height(),t.content_bottom=t.content_top+t.content_height,t.sidebar_height=t.sidebar.height(),t
		},
		sidebar_postion:function(t){
			return t.sidebar_top=t.sidebar.offset().top,
					t.sidebar_bottom=t.sidebar_top+t.sidebar_height,
					t
		},
		block_status:function(t,o,n){
			var e = jQuery(window).height(),_=e+n;return t.sidebar_height>=t.content_height?t.status="content_small":t.sidebar_height<=e?n<t.content_top?t.status="top_content":t.content_height>=n&&t.content_bottom-t.sidebar_height>=n||"up"==o&&t.sidebar_top>=n?(t.status="fixed_top","down"==o?t.menu_offset=0:1==tn_sticky_navigation&&(t.menu_offset=jQuery("#menu-main").height()+"px")):t.sidebar_bottom>=t.content_bottom&&(t.status="bottom_content"):(t.sidebar_bottom<n?t.status="bottom_content":t.sidebar_bottom<_&&t.sidebar_bottom<t.content_bottom&&"down"==o&&t.content_bottom>_?t.status="fixed_bottom":t.sidebar_top<=t.content_top&&"up"==o&&t.content_bottom>=_?t.status="top_content":t.content_bottom<=t.sidebar_bottom&&"down"==o&&t.content_bottom<_?t.status="bottom_content":n<=t.sidebar_top&&"up"==o&&t.content_top<=n&&(t.status="fixed_top"),("up"==o&&"fixed_bottom"==t.status||"fixed_top"==t.status&&"down"==o)&&(t.status="absolute")),t.status
		},
		check_events_scroll:function(){
			if(tn_sticky_sidebar.is_enable===!1){
				for(var t=0;t<tn_sticky_sidebar.blocks.length;t++){
					tn_sticky_sidebar.blocks[t].sidebar.css({
						width:"auto",
						position:"static",
						top:"auto",
						bottom:"auto"
					});
				}
			}else{
				var o,n=jQuery(window).scrollTop();
				window.requestAnimationFrame(function(){
					o = n != tn_sticky_sidebar.last_height && n > tn_sticky_sidebar.last_height ? "down" : "up",
					tn_sticky_sidebar.last_height = n,
					jQuery.each(tn_sticky_sidebar.blocks, function(t){
						var e = tn_sticky_sidebar.blocks[t];
						tn_sticky_sidebar.block_postion(e),
						tn_sticky_sidebar.sidebar_postion(e),
						e.status = tn_sticky_sidebar.block_status(e, o, n);
						var _ = e.sidebar.parent(".tn-sidebar-wrap").width();
						switch(e.status){
							case "fixed_bottom":
								if(!0 === e.fixed_bottom_run_once)
									break;
								e.fixed_top_run_once = !1,
								e.fixed_bottom_run_once=!0,
								e.top_content_run_once=!1,
								e.bottom_content_run_once=!1,
								e.absolute_run_once=!1,
								e.content_small_run_once=!1,
								e.sidebar.css({
									width:_,position:"fixed",
									top:"auto",
									bottom:"0",
									"z-index":"100"
								});
								break;
							case "top_content":
								if(!0 === e.top_content_run_once)
									break;
								e.fixed_top_run_once = !1,
								e.fixed_bottom_run_once = !1,
								e.top_content_run_once = !0,e
								.bottom_content_run_once = !1,
								e.absolute_run_once = !1,
								e.content_small_run_once = !1,
								e.sidebar.css({
									width:"auto",
									position:"static",
									top:"auto",
									bottom:"auto"
								});
								break;
								case "bottom_content":
									if(!0===e.bottom_content_run_once&&e.bottom_content_last_sidebar_height==e.sidebar_height&&e.bottom_content_content_height==e.content_height)break;e.fixed_top_run_once=!1,e.fixed_bottom_run_once=!1,e.top_content_run_once=!1,e.bottom_content_run_once=!0,e.absolute_run_once=!1,e.content_small_run_once=!1,e.bottom_content_last_sidebar_height=e.sidebar_height,e.bottom_content_content_height=e.content_height,e.sidebar.css({
										width:_,
										position:"absolute",
										top:e.content_bottom-e.sidebar_height-e.content_top,
										bottom:"auto"
									});
									break;
								case"fixed_top":if(!0===e.fixed_top_run_once)break;e.fixed_top_run_once=!0,e.fixed_bottom_run_once=!1,e.top_content_run_once=!1,e.bottom_content_run_once=!1,e.absolute_run_once=!1,e.content_small_run_once=!1,e.sidebar.css({width:_,position:"fixed",top:e.menu_offset,bottom:"auto"});break;case"absolute":if(!0===e.absolute_run_once)break;e.fixed_top_run_once=!1,e.fixed_bottom_run_once=!1,e.top_content_run_once=!1,e.bottom_content_run_once=!1,e.absolute_run_once=!0,e.content_small_run_once=!1,e.sidebar.css({width:_,position:"absolute",top:e.sidebar_top-e.content_top,bottom:"auto"});break;
								case"content_small":
									if(!0===e.content_small_run_once)
										break;
									e.fixed_top_run_once=!1,
									e.fixed_bottom_run_once=!1,
									e.top_content_run_once=!1,
									e.bottom_content_run_once=!1,
									e.absolute_run_once=!1,
									e.content_small_run_once=!0,
									e.sidebar.css({
										width:"auto",
										position:"static",
										top:"auto",
										bottom:"auto"})
								}
							})
				})
			}
		},
		reset_flags:function(){
			for(var t=0;t<tn_sticky_sidebar.blocks.length;t++)tn_sticky_sidebar.blocks[t].fixed_top_run_once=!1,tn_sticky_sidebar.blocks[t].fixed_bottom_run_once=!1,tn_sticky_sidebar.blocks[t].top_content_run_once=!1,tn_sticky_sidebar.blocks[t].bottom_content_run_once=!1,tn_sticky_sidebar.blocks[t].absolute_run_once=!1,tn_sticky_sidebar.blocks[t].content_small_run_once=!1,tn_sticky_sidebar.blocks[t].bottom_content_last_sidebar_height=0,tn_sticky_sidebar.blocks[t].bottom_content_last_content_height=0
		}
	};
jQuery(window).scroll(function(){
	tn_sticky_sidebar.check_events_scroll()
}),
jQuery(window).resize(function(){
	tn_sticky_sidebar.reset_flags(),
	tn_sticky_sidebar.is_enable = jQuery(window).width() < 769 ? !1 : !0,
	tn_sticky_sidebar.check_events_scroll()
});

function get_flex_data(e){
	var i = {};
	return	i.namespace = "tn-",
			i.selector = ".tn-slides > li",
			i.prevText='<i class="fa fa-angle-double-left"></i>',
			i.nextText='<i class="fa fa-angle-double-right"></i>',
			i.controlNav = !1,
			jQuery.each(e, function(a,t){
				"animation" == a && (i.animation = t),
				"controlNav" == a && (i.controlNav = t),
				"directionNav" == a && (i.directionNav = t),
				"speed" == a && (i.animationSpeed = t),
				"time" == a && (i.slideshowSpeed = t),
				"carousel" == a && ("undefined" == typeof e.itemWidth ? (i.itemWidth = 200, i.minItems = 2, i.maxItems = getGridSize (e.id)) : i.itemWidth = e.itemWidth, i.itemMargin = 2, i.move = 1),
				i.start = function(e){
					jQuery(".tn-flexslider").imagesLoaded(function(){
						jQuery(".tn-flexslider").removeClass("slider-loading")
					}),
					touch === !1 && jQuery("#sidebar").trigger("sticky_kit: recalc")
				}
			}),
	i
}
function getGridSize(e){
	return jQuery("#" + e).width() < 700 ? 4 : 6;
}

function getGridBigSiderSize(e){
	return jQuery("#"+e).width() < 700 ? 5 : 7
}

jQuery(document).ready(function(e){
	"use strict";
	function i(e){
		return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e.val())
	}
	0 != tn_smooth_scroll_data && tn_smooth_scroll(),
	"0" != tn_to_top && e().UItoTop({
		containerID:"toTop",
		easingType:"easeOutQuart",
		text:'<i class="fa fa-long-arrow-up"></i>',
		scrollSpeed:800}),
	e(".social-bar-wrapper").find("a").tipsy({
		fade:!0
	}),
	1 == tn_sb_instagram_popup && e(".sb-instagram-widget .instagram-link").magnificPopup({
		type:"image",
		closeOnContentClick:!0,
		closeBtnInside:!1,
		fixedContentPos:!0,
		mainClass:"mfp-no-margins mfp-with-zoom",
		image:{verticalFit:!0},
		gallery:{enabled:!0},
		zoom:{
			enabled:!0,
			duration:600,
			easing:"ease",
			opener:function(e){
				return e.find("img")
			}
		}
	}),
	1 == tn_smooth_display && touch === !1 && e(".thumb-wrap").addClass("invisible").viewportChecker({
		classToAdd:"visible",
		offset:-100,
		repeat:!1,
		callbackFunction:function(e,i){},
		scrollHorizontal:!1
	}),
	e(".tn-single-gallery-wrap").find("a").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!0,gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},removalDelay:500,mainClass:"mfp-fade"});var a=e(".tn-default-gallery");a.fadeIn(300).justifiedGallery({lastRow:"justify",rowHeight:168,maxRowHeight:300,rel:"gallery",margins:1,captions:!0,randomize:!1,sizeRangeSuffixes:{lt100:"",lt240:"",lt320:"",lt500:"",lt640:"",lt1024:""}}).on("jg.complete",function(){e(this).find("a").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!0,removalDelay:500,mainClass:"mfp-fade",zoom:{enabled:!0,duration:500,easing:"ease",opener:function(e){return e.find("img")}},gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]}})});var t=e(".side-dock-wrap");e("#close-side-dock").click(function(e){e.preventDefault(),t.removeClass("side-dock-visible")}),e("#footer").viewportChecker({repeat:!1,offset:-100,callbackFunction:function(e,i){t.addClass("side-dock-visible")},scrollHorizontal:!1});var n=e("div.score-bar");
	n.addClass("score-animation"),n.viewportChecker({repeat:!1,offset:100,callbackFunction:function(i,a){n.removeClass("score-animation"),e(".top-reviews").addClass("top-reviews-display")},scrollHorizontal:!1});var r=e("#tn-main-nav-wrap"),s=e("#sidebar");imagesLoaded("body",function(){1==tn_sticky_navigation&&(r.width(e("#main-nav").width()),r.scrollupbar()),touch===!1&&e(".tn-sidebar-sticky").each(function(){var i=e(this);tn_sticky_sidebar.sticky_sidebar(i)})}),e(window).resize(function(){var i=e(window).width(),a=e("#main-nav").width();r.width(a),e.scrollupbar.destroy(),r.scrollupbar(),touch===!1&&s.trigger("sticky_kit:recalc"),i>992&&e("body").removeClass("mobile-js-menu")}),e(".meta-thumb-element").hover(function(i){var a=e(i.target).parents(".thumb-wrap"),t=a.find(".shares-to-social-thumb-wrap");
	if(t.length)t.addClass("share-visible"),a.mouseleave(function(){t.removeClass("share-visible")});
	else{var n=e(i.target).parents(".thumb-slider-wrap"),r=n.find(".shares-to-social-thumb-wrap");r.addClass("share-visible"),n.mouseleave(function(){r.removeClass("share-visible")})}return!1});

var o = e("#tn-ticker-bar");
o.length&&o.ticker({titleText:tn_ticker_title, direction:1==tn_rtl?"rtl":"ltr"}),e("#mobile-button-nav-open").click(function(){
	return e("body").toggleClass("mobile-js-menu"), !1
});

var l = e("#main-mobile-menu");
l.prepend('<div class="close-mobile-menu-wrap"><a href="#" id="close-mobile-menu-button"></a></div>');
var d=e("#close-mobile-menu-button");
d.text(tn_close_mobile_menu_text),e("html").click(function(){e("body").removeClass("mobile-js-menu")}),l.click(function(e){
		e.stopPropagation()
	}),
d.click(function(){
	return e("body").removeClass("mobile-js-menu"),
	!1
});

var u;
e.isEmptyObject(tn_slider_data)===!1&&e.each(tn_slider_data,
	function(i,a){
		u=get_flex_data(a),
		e("#"+i+" .tn-flexslider").flexslider(u),
		touch===!1&&e("#sidebar").trigger("sticky_kit:recalc")
	}),
e.isEmptyObject(tn_big_slider_data)===!1&&e.each(tn_big_slider_data,
	function(i,a){
		"slider"==a.type&&e("#"+i).flexslider({
			namespace:"tn-",
			prevText:'<i class="fa fa-angle-double-left"></i>',
			nextText:'<i class="fa fa-angle-double-right"></i>',
			selector:".tn-slides > li",
			animation:a.animation,
			directionNav:!0,
			slideshow:!1,
			pauseOnHover:!0,
			slideshowSpeed:7e3,
			animationSpeed:600,
			smoothHeight:!1,
			controlNav:!1,
			animationLoop:!0,
			sync:a.sync,
			start:function(a){
				e("#"+i).imagesLoaded(function(){
					e("#"+i).closest(".module-big-slider-inner").removeClass("slider-loading"),
					a.playing||a.play()
				}),
				touch===!1&&e("#sidebar").trigger("sticky_kit:recalc")
			}
		}),
		"carousel"==a.type&&e("#"+i).flexslider({
			namespace:"tn-",
			prevText:'<i class="fa fa-angle-double-left"></i>',
			nextText:'<i class="fa fa-angle-double-right"></i>',
			selector:".tn-slides > li",
			animation:"slide",
			controlNav:!1,
			animationLoop:!1,
			slideshow:!1,
			directionNav:!1,
			itemWidth:100,
			itemMargin:0,
			maxItems:getGridBigSiderSize(i),
			asNavFor:a.asNavFor,
			start:function(i){
				touch===!1&&e("#sidebar").trigger("sticky_kit:recalc")
			}
		})
	}),
navigator.userAgent.search("MSIE")>=0&&navigator.userAgent.match(/Trident.*rv\:11\./)&&(e(".tn-dropdown-menu").css("display","none"),
	e(".tn-mega-menu-col").css("display","none"),
	e(".tn-mega-menu").css("display","none"));

var c=e(".share-to-mail-wrap");
if(c.find("a").click(function(){
	var a=e(this).attr("data_post_id"),
	t=e(this).next(".tn-share-to-email-popup");
	return t.is(":visible") ? (t.slideUp(250),
		t.find(".errors").hide().removeClass("error"),
		t.find(".share-errors").removeClass("show-error")) : (t.slideDown(250),
		t.find("input[type=submit]").removeAttr("disabled")),
		t.find(".share-mail-cancel").unbind("click").click(function(){
			return t.slideUp(250),
			t.find(".errors").hide().removeClass("error"),
			t.find(".share-errors").removeClass("show-error"),
			!1
		}),
		t.find("input[type=submit]").unbind("click").click(function(){
			t.find(".error").removeClass("error"),
			t.find(".share-errors").removeClass("show-error");

	var n=t.find("input[name=source-email]"),
		r=t.find("input[name=target-email]"),
		s=t.find("input[name=source-name]");
	return 0==i(n)&&(n.addClass("error"),
		t.find(".share-errors").addClass("show-error")),
		0==i(r)&&(r.addClass("error"),
		t.find(".share-errors").addClass("show-error")),
		0==t.find(".error").length&&(t.find(".share-loading").css("display","block"),
		e.ajax({
			url:tn_ajax_url,
			type:"POST",
			data:{
				action:"tn_ajax_email",
				share_post_id:a,
				source_email:n.val(),
				target_email:r.val(),
				name:s.val()
			},
			success:function(i){
				i=jQuery.parseJSON(i),
				i&&t.html(i),
				e(".share-mail-close").click(function(){
					return t.slideUp(250),!1
				})
			}
		})),
		!1
	}),!1}),

	1==tn_single_image_popup&&touch===!1){
		var m=e(".post-content-wrap");
		m.length>0&&m.find("a img").each(function(){
			var i=e(this).parent(),
			a=i.attr("href");
			a.indexOf("wp-content/uploads")>0&&i.addClass("single-popup")}),
		m.magnificPopup({
			type:"image",
			removalDelay:500,
			mainClass:"mfp-fade",
			delegate:".single-popup",
			closeOnContentClick:!0,
			closeBtnInside:!0,
			zoom:{
				enabled:!0,
				duration:500,
				easing:"ease"
			}
		})
	}
});